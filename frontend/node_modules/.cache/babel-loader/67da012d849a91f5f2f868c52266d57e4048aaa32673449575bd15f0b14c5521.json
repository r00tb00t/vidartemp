{"ast":null,"code":"import React,{useCallback,useEffect,useMemo,useState}from\"react\";import{AlertTriangle,RefreshCw,Shield}from\"lucide-react\";import api from\"../api/client\";/**\n * GovernanceTraceView\n *\n * Minimal view to support the `/governance-trace` route.\n * The backend endpoint for governance trace events may vary by deployment,\n * so this component is defensive: it tries a reasonable endpoint and shows\n * a helpful empty state if none is available.\n */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function GovernanceTraceView(){const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[events,setEvents]=useState([]);const endpoint=useMemo(()=>\"/governance/trace\",[]);const load=useCallback(async()=>{setLoading(true);setError(null);try{var _ref,_res$data$items,_res$data;const res=await api.get(endpoint);const items=(_ref=(_res$data$items=res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.items)!==null&&_res$data$items!==void 0?_res$data$items:res===null||res===void 0?void 0:res.data)!==null&&_ref!==void 0?_ref:[];setEvents(Array.isArray(items)?items:[]);}catch(e){var _ref2,_e$response$data$deta,_e$response,_e$response$data,_e$response$data$deta2;setError((_ref2=(_e$response$data$deta=e===null||e===void 0?void 0:(_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:(_e$response$data$deta2=_e$response$data.detail)===null||_e$response$data$deta2===void 0?void 0:_e$response$data$deta2.message)!==null&&_e$response$data$deta!==void 0?_e$response$data$deta:e===null||e===void 0?void 0:e.message)!==null&&_ref2!==void 0?_ref2:\"Request failed\");setEvents([]);}finally{setLoading(false);}},[endpoint]);useEffect(()=>{load();},[load]);return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 max-w-6xl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-lg font-semibold text-slate-100\",children:\"Governance Trace\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-500 mt-0.5\",children:\"Event timeline and trace details for governance-related activity.\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:load,disabled:loading,className:\"flex items-center gap-2 px-3 py-1.5 text-xs bg-slate-800 hover:bg-slate-700 text-slate-300 rounded border border-slate-700 transition-colors disabled:opacity-40\",children:[/*#__PURE__*/_jsx(RefreshCw,{size:13,className:loading?\"animate-spin\":\"\"}),\"Refresh\"]})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 flex items-center gap-2 text-sm text-red-400 bg-red-500/10 border border-red-500/20 rounded px-4 py-2\",children:[/*#__PURE__*/_jsx(AlertTriangle,{size:15}),\" \",error]}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"text-slate-500 text-sm animate-pulse\",children:\"Loading trace events\\u2026\"}),!loading&&!error&&events.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-[#111118] border border-slate-800 rounded-lg p-6 text-center\",children:[/*#__PURE__*/_jsx(Shield,{size:28,className:\"text-slate-700 mx-auto mb-3\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-400\",children:\"No trace events available.\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-slate-600 mt-1\",children:[\"Expected endpoint: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-mono\",children:endpoint})]})]}),!loading&&events.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-[#0d0d14] border border-slate-800 rounded-lg overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-3 border-b border-slate-800\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-[10px] text-slate-500 font-mono uppercase tracking-widest\",children:[\"Events (\",events.length,\")\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"divide-y divide-slate-800/50\",children:events.map((ev,idx)=>{var _ref3,_ev$timestamp,_ref4,_ev$event_type,_ref5,_ev$event_id;const ts=(_ref3=(_ev$timestamp=ev===null||ev===void 0?void 0:ev.timestamp)!==null&&_ev$timestamp!==void 0?_ev$timestamp:ev===null||ev===void 0?void 0:ev.created_at)!==null&&_ref3!==void 0?_ref3:ev===null||ev===void 0?void 0:ev.occurred_at;const title=(_ref4=(_ev$event_type=ev===null||ev===void 0?void 0:ev.event_type)!==null&&_ev$event_type!==void 0?_ev$event_type:ev===null||ev===void 0?void 0:ev.type)!==null&&_ref4!==void 0?_ref4:\"event\";const id=(_ref5=(_ev$event_id=ev===null||ev===void 0?void 0:ev.event_id)!==null&&_ev$event_id!==void 0?_ev$event_id:ev===null||ev===void 0?void 0:ev.id)!==null&&_ref5!==void 0?_ref5:idx;return/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-3 hover:bg-slate-800/20 transition-colors\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"min-w-0\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-mono text-slate-200 truncate\",children:title}),(ev===null||ev===void 0?void 0:ev.message)&&/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-500 mt-1\",children:String(ev.message)})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-[10px] text-slate-600 font-mono whitespace-nowrap\",children:ts?new Date(ts).toLocaleString():\"—\"})]})},id);})})]})]});}","map":{"version":3,"names":["React","useCallback","useEffect","useMemo","useState","AlertTriangle","RefreshCw","Shield","api","jsx","_jsx","jsxs","_jsxs","GovernanceTraceView","loading","setLoading","error","setError","events","setEvents","endpoint","load","_ref","_res$data$items","_res$data","res","get","items","data","Array","isArray","e","_ref2","_e$response$data$deta","_e$response","_e$response$data","_e$response$data$deta2","response","detail","message","className","children","onClick","disabled","size","length","map","ev","idx","_ref3","_ev$timestamp","_ref4","_ev$event_type","_ref5","_ev$event_id","ts","timestamp","created_at","occurred_at","title","event_type","type","id","event_id","String","Date","toLocaleString"],"sources":["/home/kavia/workspace/code-generation/vidartemp-241505/frontend/src/views/GovernanceTraceView.js"],"sourcesContent":["import React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { AlertTriangle, RefreshCw, Shield } from \"lucide-react\";\nimport api from \"../api/client\";\n\n/**\n * GovernanceTraceView\n *\n * Minimal view to support the `/governance-trace` route.\n * The backend endpoint for governance trace events may vary by deployment,\n * so this component is defensive: it tries a reasonable endpoint and shows\n * a helpful empty state if none is available.\n */\nexport default function GovernanceTraceView() {\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [events, setEvents] = useState([]);\n\n  const endpoint = useMemo(() => \"/governance/trace\", []);\n\n  const load = useCallback(async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const res = await api.get(endpoint);\n      const items = res?.data?.items ?? res?.data ?? [];\n      setEvents(Array.isArray(items) ? items : []);\n    } catch (e) {\n      setError(e?.response?.data?.detail?.message ?? e?.message ?? \"Request failed\");\n      setEvents([]);\n    } finally {\n      setLoading(false);\n    }\n  }, [endpoint]);\n\n  useEffect(() => {\n    load();\n  }, [load]);\n\n  return (\n    <div className=\"p-6 max-w-6xl\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <div>\n          <h1 className=\"text-lg font-semibold text-slate-100\">Governance Trace</h1>\n          <p className=\"text-xs text-slate-500 mt-0.5\">\n            Event timeline and trace details for governance-related activity.\n          </p>\n        </div>\n        <button\n          onClick={load}\n          disabled={loading}\n          className=\"flex items-center gap-2 px-3 py-1.5 text-xs bg-slate-800 hover:bg-slate-700 text-slate-300 rounded border border-slate-700 transition-colors disabled:opacity-40\"\n        >\n          <RefreshCw size={13} className={loading ? \"animate-spin\" : \"\"} />\n          Refresh\n        </button>\n      </div>\n\n      {error && (\n        <div className=\"mb-4 flex items-center gap-2 text-sm text-red-400 bg-red-500/10 border border-red-500/20 rounded px-4 py-2\">\n          <AlertTriangle size={15} /> {error}\n        </div>\n      )}\n\n      {loading && (\n        <div className=\"text-slate-500 text-sm animate-pulse\">Loading trace events…</div>\n      )}\n\n      {!loading && !error && events.length === 0 && (\n        <div className=\"bg-[#111118] border border-slate-800 rounded-lg p-6 text-center\">\n          <Shield size={28} className=\"text-slate-700 mx-auto mb-3\" />\n          <p className=\"text-sm text-slate-400\">No trace events available.</p>\n          <p className=\"text-xs text-slate-600 mt-1\">\n            Expected endpoint: <span className=\"font-mono\">{endpoint}</span>\n          </p>\n        </div>\n      )}\n\n      {!loading && events.length > 0 && (\n        <div className=\"bg-[#0d0d14] border border-slate-800 rounded-lg overflow-hidden\">\n          <div className=\"px-4 py-3 border-b border-slate-800\">\n            <p className=\"text-[10px] text-slate-500 font-mono uppercase tracking-widest\">\n              Events ({events.length})\n            </p>\n          </div>\n          <div className=\"divide-y divide-slate-800/50\">\n            {events.map((ev, idx) => {\n              const ts = ev?.timestamp ?? ev?.created_at ?? ev?.occurred_at;\n              const title = ev?.event_type ?? ev?.type ?? \"event\";\n              const id = ev?.event_id ?? ev?.id ?? idx;\n\n              return (\n                <div key={id} className=\"px-4 py-3 hover:bg-slate-800/20 transition-colors\">\n                  <div className=\"flex items-start justify-between gap-4\">\n                    <div className=\"min-w-0\">\n                      <p className=\"text-xs font-mono text-slate-200 truncate\">{title}</p>\n                      {ev?.message && (\n                        <p className=\"text-xs text-slate-500 mt-1\">{String(ev.message)}</p>\n                      )}\n                    </div>\n                    <p className=\"text-[10px] text-slate-600 font-mono whitespace-nowrap\">\n                      {ts ? new Date(ts).toLocaleString() : \"—\"}\n                    </p>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}