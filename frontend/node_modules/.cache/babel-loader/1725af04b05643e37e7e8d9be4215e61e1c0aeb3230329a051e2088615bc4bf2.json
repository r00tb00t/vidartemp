{"ast":null,"code":"import React,{useEffect,useState,useCallback}from\"react\";import{Server,ChevronRight,RefreshCw,AlertTriangle,ArrowUpRight,ArrowDownRight,Package,Layers,ChevronLeft}from\"lucide-react\";import api from\"../api/client\";import SovereigntyBadge from\"../components/SovereigntyBadge\";/* ── small helpers ── */import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const OutcomeBadge=_ref=>{var _map$outcome;let{outcome}=_ref;const map={DENY:\"bg-red-500/15 text-red-300 border-red-500/30\",FLAG:\"bg-amber-500/15 text-amber-300 border-amber-500/30\",ALLOW:\"bg-emerald-500/15 text-emerald-300 border-emerald-500/30\"};return/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex px-2 py-0.5 rounded border text-[10px] font-mono font-semibold\\n      \".concat((_map$outcome=map[outcome])!==null&&_map$outcome!==void 0?_map$outcome:\"bg-slate-700 text-slate-300 border-slate-600\"),children:outcome});};const Spinner=()=>/*#__PURE__*/_jsx(RefreshCw,{size:14,className:\"animate-spin text-slate-500\"});const Err=_ref2=>{let{msg}=_ref2;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-sm text-red-400 bg-red-500/10 border border-red-500/20 rounded px-3 py-2 my-2\",children:[/*#__PURE__*/_jsx(AlertTriangle,{size:13}),\" \",msg]});};const EmptyRow=_ref3=>{let{cols,label}=_ref3;return/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:cols,className:\"py-6 text-center text-slate-600 text-xs\",children:label})});};/* ────────────────────────────────────────────────────────────\n   Tab: Risk Summary\n──────────────────────────────────────────────────────────── */function RiskTab(_ref4){var _d$most_violated_rule;let{systemId}=_ref4;const[d,setD]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{setD(null);setLoading(true);setError(null);api.get(\"/systems/\".concat(systemId,\"/risk-summary\")).then(r=>setD(r.data)).catch(e=>{var _e$response$data$deta,_e$response,_e$response$data,_e$response$data$deta2;return setError((_e$response$data$deta=e===null||e===void 0?void 0:(_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:(_e$response$data$deta2=_e$response$data.detail)===null||_e$response$data$deta2===void 0?void 0:_e$response$data$deta2.message)!==null&&_e$response$data$deta!==void 0?_e$response$data$deta:e.message);}).finally(()=>setLoading(false));},[systemId]);if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"p-4\",children:/*#__PURE__*/_jsx(Spinner,{})});if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"p-4\",children:/*#__PURE__*/_jsx(Err,{msg:error})});if(!d)return null;const StatRow=_ref5=>{var _c$accent;let{label,value,accent}=_ref5;const c={red:\"text-red-300\",amber:\"text-amber-300\",emerald:\"text-emerald-300\",slate:\"text-slate-200\"};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between py-2 border-b border-slate-800/60 last:border-0\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-slate-400\",children:label}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-mono font-semibold tabular-nums \".concat((_c$accent=c[accent])!==null&&_c$accent!==void 0?_c$accent:c.slate),children:value})]});};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-[#0d0d14] border border-slate-800 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-[10px] text-slate-500 font-mono uppercase tracking-widest mb-2\",children:\"All Time\"}),/*#__PURE__*/_jsx(StatRow,{label:\"Total Evaluations\",value:d.total_evaluations,accent:\"slate\"}),/*#__PURE__*/_jsx(StatRow,{label:\"Allow\",value:d.total_allow,accent:\"emerald\"}),/*#__PURE__*/_jsx(StatRow,{label:\"Flag\",value:d.total_flag,accent:\"amber\"}),/*#__PURE__*/_jsx(StatRow,{label:\"Deny\",value:d.total_deny,accent:\"red\"}),/*#__PURE__*/_jsx(StatRow,{label:\"Critical Violations\",value:d.total_critical_violations,accent:\"red\"}),/*#__PURE__*/_jsx(StatRow,{label:\"Warning Violations\",value:d.total_warning_violations,accent:\"amber\"}),/*#__PURE__*/_jsx(StatRow,{label:\"Most Violated Rule\",value:(_d$most_violated_rule=d.most_violated_rule_code)!==null&&_d$most_violated_rule!==void 0?_d$most_violated_rule:\"—\",accent:d.most_violated_rule_code?\"amber\":\"slate\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[[d.last_7_days,\"Last 7 Days\"],[d.previous_7_days,\"Prev 7 Days\"]].map(_ref6=>{let[w,title]=_ref6;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-[#0d0d14] border border-slate-800 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-[10px] text-slate-500 font-mono uppercase tracking-widest mb-2\",children:title}),/*#__PURE__*/_jsx(StatRow,{label:\"Evaluations\",value:w.evaluations,accent:\"slate\"}),/*#__PURE__*/_jsx(StatRow,{label:\"Deny\",value:w.deny,accent:\"red\"}),/*#__PURE__*/_jsx(StatRow,{label:\"Flag\",value:w.flag,accent:\"amber\"})]},title);})})]});}/* ────────────────────────────────────────────────────────────\n   Tab: Dependency Map\n──────────────────────────────────────────────────────────── */function DependencyTab(_ref7){let{systemId}=_ref7;const[d,setD]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{setD(null);setLoading(true);setError(null);api.get(\"/systems/\".concat(systemId,\"/dependency-map\")).then(r=>setD(r.data)).catch(e=>{var _e$response$data$deta3,_e$response2,_e$response2$data,_e$response2$data$det;return setError((_e$response$data$deta3=e===null||e===void 0?void 0:(_e$response2=e.response)===null||_e$response2===void 0?void 0:(_e$response2$data=_e$response2.data)===null||_e$response2$data===void 0?void 0:(_e$response2$data$det=_e$response2$data.detail)===null||_e$response2$data$det===void 0?void 0:_e$response2$data$det.message)!==null&&_e$response$data$deta3!==void 0?_e$response$data$deta3:e.message);}).finally(()=>setLoading(false));},[systemId]);if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"p-4\",children:/*#__PURE__*/_jsx(Spinner,{})});if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"p-4\",children:/*#__PURE__*/_jsx(Err,{msg:error})});if(!d)return null;return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 space-y-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-[#0d0d14] border border-slate-800 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-3\",children:[/*#__PURE__*/_jsx(ArrowUpRight,{size:13,className:\"text-indigo-400\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-[10px] text-slate-500 font-mono uppercase tracking-widest\",children:[\"Upstream (\",d.interfaces.upstream.length,\")\"]})]}),d.interfaces.upstream.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-600\",children:\"No upstream interfaces\"}):d.interfaces.upstream.map(s=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between py-1.5 border-b border-slate-800/40 last:border-0\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-slate-300 font-mono truncate max-w-[120px]\",children:s.system_name}),/*#__PURE__*/_jsx(SovereigntyBadge,{level:s.sovereignty_level})]},s.system_id))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-[#0d0d14] border border-slate-800 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-3\",children:[/*#__PURE__*/_jsx(ArrowDownRight,{size:13,className:\"text-slate-400\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-[10px] text-slate-500 font-mono uppercase tracking-widest\",children:[\"Downstream (\",d.interfaces.downstream.length,\")\"]})]}),d.interfaces.downstream.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-600\",children:\"No downstream interfaces\"}):d.interfaces.downstream.map(s=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between py-1.5 border-b border-slate-800/40 last:border-0\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-slate-300 font-mono truncate max-w-[120px]\",children:s.system_name}),/*#__PURE__*/_jsx(SovereigntyBadge,{level:s.sovereignty_level})]},s.system_id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-[#0d0d14] border border-slate-800 rounded-lg overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 px-4 py-3 border-b border-slate-800\",children:[/*#__PURE__*/_jsx(Layers,{size:13,className:\"text-slate-500\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-[10px] text-slate-500 font-mono uppercase tracking-widest\",children:[\"Active Components (\",d.components.length,\")\"]})]}),d.components.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"px-4 py-5 text-xs text-slate-600\",children:\"No active components\"}):/*#__PURE__*/_jsxs(\"table\",{className:\"w-full text-xs\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-slate-800 text-slate-500 font-mono text-[10px] uppercase tracking-wide\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"text-left px-4 py-2\",children:\"Component\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left px-4 py-2\",children:\"Sovereignty\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left px-4 py-2\",children:\"Product\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left px-4 py-2\",children:\"Vendor\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left px-4 py-2\",children:\"Product Sov.\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left px-4 py-2\",children:\"Zero Cloud\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:d.components.map(c=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-slate-800/40 last:border-0 hover:bg-slate-800/20 transition-colors\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2.5 text-slate-200 font-mono\",children:c.component_name}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2.5\",children:/*#__PURE__*/_jsx(SovereigntyBadge,{level:c.sovereignty_level})}),c.product?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2.5 text-slate-300\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1.5\",children:[/*#__PURE__*/_jsx(Package,{size:11,className:\"text-indigo-400\"}),c.product.canonical_name]})}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-4 py-2.5 text-slate-400\",children:[c.product.vendor_name,\" \",/*#__PURE__*/_jsxs(\"span\",{className:\"text-slate-600\",children:[\"(\",c.product.vendor_country,\")\"]})]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2.5\",children:/*#__PURE__*/_jsx(SovereigntyBadge,{level:c.product.sovereignty_level})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2.5\",children:/*#__PURE__*/_jsx(\"span\",{className:c.product.zero_cloud_capable?\"text-emerald-400\":\"text-red-400\",children:c.product.zero_cloud_capable?\"Yes\":\"No\"})})]}):/*#__PURE__*/_jsx(\"td\",{colSpan:4,className:\"px-4 py-2.5 text-slate-600 italic\",children:\"No product linked\"})]},c.component_id))})]})]})]});}/* ────────────────────────────────────────────────────────────\n   Tab: Recent Evaluations\n──────────────────────────────────────────────────────────── */function EvaluationsTab(_ref8){var _d$items;let{systemId}=_ref8;const PAGE_SIZE=10;const[page,setPage]=useState(1);const[d,setD]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{setD(null);setLoading(true);setError(null);api.get(\"/systems/\".concat(systemId,\"/evaluation-history\"),{params:{page,page_size:PAGE_SIZE}}).then(r=>setD(r.data)).catch(e=>{var _e$response$data$deta4,_e$response3,_e$response3$data,_e$response3$data$det;return setError((_e$response$data$deta4=e===null||e===void 0?void 0:(_e$response3=e.response)===null||_e$response3===void 0?void 0:(_e$response3$data=_e$response3.data)===null||_e$response3$data===void 0?void 0:(_e$response3$data$det=_e$response3$data.detail)===null||_e$response3$data$det===void 0?void 0:_e$response3$data$det.message)!==null&&_e$response$data$deta4!==void 0?_e$response$data$deta4:e.message);}).finally(()=>setLoading(false));},[systemId,page]);// reset page when system changes\nuseEffect(()=>{setPage(1);},[systemId]);if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"p-4\",children:/*#__PURE__*/_jsx(Spinner,{})});if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"p-4\",children:/*#__PURE__*/_jsx(Err,{msg:error})});if(!d)return null;const items=(_d$items=d.items)!==null&&_d$items!==void 0?_d$items:[];return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-[#0d0d14] border border-slate-800 rounded-lg overflow-hidden\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full text-xs\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-slate-800 text-slate-500 font-mono text-[10px] uppercase tracking-wide\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"text-left px-4 py-2\",children:\"Triggered\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left px-4 py-2\",children:\"Event Type\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left px-4 py-2\",children:\"Outcome\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left px-4 py-2\",children:\"Violations\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left px-4 py-2\",children:\"Triggered By\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:items.length===0?/*#__PURE__*/_jsx(EmptyRow,{cols:5,label:\"No evaluations\"}):items.map(ev=>{var _ev$violations,_ev$triggered_by;return/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-slate-800/40 last:border-0 hover:bg-slate-800/20 transition-colors\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2.5 text-slate-500 font-mono whitespace-nowrap\",children:new Date(ev.triggered_at).toLocaleString()}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2.5 text-slate-400 font-mono\",children:ev.event_type}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2.5\",children:/*#__PURE__*/_jsx(OutcomeBadge,{outcome:ev.outcome})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2.5\",children:((_ev$violations=ev.violations)===null||_ev$violations===void 0?void 0:_ev$violations.length)>0?/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-1\",children:ev.violations.map((v,i)=>/*#__PURE__*/_jsx(\"span\",{className:\"text-[10px] font-mono px-1.5 py-0.5 rounded bg-slate-700 text-slate-400\",children:v.rule_code},i))}):/*#__PURE__*/_jsx(\"span\",{className:\"text-slate-700\",children:\"\\u2014\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2.5 text-slate-500 font-mono\",children:(_ev$triggered_by=ev.triggered_by)!==null&&_ev$triggered_by!==void 0?_ev$triggered_by:\"—\"})]},ev.event_id);})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mt-3\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-[11px] text-slate-600 font-mono\",children:[d.total,\" evaluation\",d.total!==1?\"s\":\"\",\" total\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPage(p=>Math.max(1,p-1)),disabled:page===1||loading,className:\"p-1.5 rounded border border-slate-700 text-slate-400 hover:text-slate-200 hover:border-slate-600 disabled:opacity-30 transition-colors\",children:/*#__PURE__*/_jsx(ChevronLeft,{size:13})}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-[11px] text-slate-500 font-mono\",children:[\"page \",page]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPage(p=>p+1),disabled:!d.has_next||loading,className:\"p-1.5 rounded border border-slate-700 text-slate-400 hover:text-slate-200 hover:border-slate-600 disabled:opacity-30 transition-colors\",children:/*#__PURE__*/_jsx(ChevronRight,{size:13})})]})]})]});}/* ────────────────────────────────────────────────────────────\n   System Detail Panel\n──────────────────────────────────────────────────────────── */const TABS=[{id:\"risk\",label:\"Risk Summary\"},{id:\"map\",label:\"Dependency Map\"},{id:\"evals\",label:\"Evaluations\"}];function SystemDetail(_ref9){let{system,onClose}=_ref9;const[tab,setTab]=useState(\"risk\");return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col h-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-3 border-b border-slate-800 flex items-start justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Server,{size:14,className:\"text-indigo-400\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold text-slate-100 font-mono\",children:system.system_name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mt-1.5\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-[10px] text-slate-600 font-mono\",children:[\"L\",system.layer_id]}),/*#__PURE__*/_jsx(SovereigntyBadge,{level:system.sovereignty_level}),system.zero_cloud_required&&/*#__PURE__*/_jsx(\"span\",{className:\"text-[10px] text-indigo-400 border border-indigo-500/30 bg-indigo-500/10 px-1.5 py-0.5 rounded font-mono\",children:\"ZERO-CLOUD\"}),!system.is_active&&/*#__PURE__*/_jsx(\"span\",{className:\"text-[10px] text-slate-500 border border-slate-700 px-1.5 py-0.5 rounded font-mono\",children:\"INACTIVE\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-slate-600 hover:text-slate-300 text-xs transition-colors\",children:\"\\u2715\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex border-b border-slate-800\",children:TABS.map(t=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setTab(t.id),className:\"px-4 py-2.5 text-[11px] font-mono uppercase tracking-wide transition-colors border-b-2 \".concat(tab===t.id?\"border-indigo-500 text-indigo-300\":\"border-transparent text-slate-500 hover:text-slate-300\"),children:t.label},t.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 overflow-y-auto\",children:[tab===\"risk\"&&/*#__PURE__*/_jsx(RiskTab,{systemId:system.system_id}),tab===\"map\"&&/*#__PURE__*/_jsx(DependencyTab,{systemId:system.system_id}),tab===\"evals\"&&/*#__PURE__*/_jsx(EvaluationsTab,{systemId:system.system_id})]})]});}/* ────────────────────────────────────────────────────────────\n   System Explorer (root view)\n──────────────────────────────────────────────────────────── */export default function SystemExplorer(){const[systems,setSystems]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[selected,setSelected]=useState(null);const load=useCallback(async()=>{setLoading(true);setError(null);try{const res=await api.get(\"/systems\");setSystems(res.data);}catch(e){var _ref0,_e$response$data$deta5,_e$response4,_e$response4$data,_e$response4$data$det;setError((_ref0=(_e$response$data$deta5=e===null||e===void 0?void 0:(_e$response4=e.response)===null||_e$response4===void 0?void 0:(_e$response4$data=_e$response4.data)===null||_e$response4$data===void 0?void 0:(_e$response4$data$det=_e$response4$data.detail)===null||_e$response4$data$det===void 0?void 0:_e$response4$data$det.message)!==null&&_e$response$data$deta5!==void 0?_e$response$data$deta5:e.message)!==null&&_ref0!==void 0?_ref0:\"Request failed\");}finally{setLoading(false);}},[]);useEffect(()=>{load();},[load]);return/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-72 flex-shrink-0 border-r border-slate-800 flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-3 border-b border-slate-800 flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-sm font-semibold text-slate-100\",children:\"Systems\"}),/*#__PURE__*/_jsx(\"button\",{onClick:load,disabled:loading,className:\"text-slate-500 hover:text-slate-300 transition-colors disabled:opacity-40\",children:/*#__PURE__*/_jsx(RefreshCw,{size:13,className:loading?\"animate-spin\":\"\"})})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"p-3\",children:/*#__PURE__*/_jsx(Err,{msg:error})}),loading&&!systems.length&&/*#__PURE__*/_jsx(\"div\",{className:\"p-4 text-xs text-slate-600 animate-pulse\",children:\"Loading systems\\u2026\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 overflow-y-auto\",children:[systems.map(s=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setSelected(s),className:\"w-full text-left px-4 py-3 border-b border-slate-800/50 transition-colors flex items-center justify-between group \".concat((selected===null||selected===void 0?void 0:selected.system_id)===s.system_id?\"bg-indigo-600/10 border-l-2 border-l-indigo-500\":\"hover:bg-slate-800/40 border-l-2 border-l-transparent\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"min-w-0\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-mono truncate \".concat((selected===null||selected===void 0?void 0:selected.system_id)===s.system_id?\"text-indigo-200\":\"text-slate-300\"),children:s.system_name}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mt-1\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-[10px] text-slate-600 font-mono\",children:[\"L\",s.layer_id]}),/*#__PURE__*/_jsx(SovereigntyBadge,{level:s.sovereignty_level}),!s.is_active&&/*#__PURE__*/_jsx(\"span\",{className:\"text-[10px] text-slate-600\",children:\"inactive\"})]})]}),/*#__PURE__*/_jsx(ChevronRight,{size:13,className:\"flex-shrink-0 ml-2 transition-colors \".concat((selected===null||selected===void 0?void 0:selected.system_id)===s.system_id?\"text-indigo-400\":\"text-slate-700 group-hover:text-slate-500\")})]},s.system_id)),!loading&&systems.length===0&&/*#__PURE__*/_jsx(\"p\",{className:\"px-4 py-6 text-xs text-slate-600 text-center\",children:\"No systems registered\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-2 border-t border-slate-800\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-[10px] text-slate-700 font-mono\",children:[systems.length,\" system\",systems.length!==1?\"s\":\"\"]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 min-w-0 overflow-hidden\",children:selected?/*#__PURE__*/_jsx(SystemDetail,{system:selected,onClose:()=>setSelected(null)}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center h-full text-center px-8\",children:[/*#__PURE__*/_jsx(Server,{size:32,className:\"text-slate-700 mb-3\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-500\",children:\"Select a system to inspect\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-700 mt-1\",children:\"Risk summary \\xB7 Dependency map \\xB7 Evaluations\"})]})})]});}","map":{"version":3,"names":["React","useEffect","useState","useCallback","Server","ChevronRight","RefreshCw","AlertTriangle","ArrowUpRight","ArrowDownRight","Package","Layers","ChevronLeft","api","SovereigntyBadge","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","OutcomeBadge","_ref","_map$outcome","outcome","map","DENY","FLAG","ALLOW","className","concat","children","Spinner","size","Err","_ref2","msg","EmptyRow","_ref3","cols","label","colSpan","RiskTab","_ref4","_d$most_violated_rule","systemId","d","setD","loading","setLoading","error","setError","get","then","r","data","catch","e","_e$response$data$deta","_e$response","_e$response$data","_e$response$data$deta2","response","detail","message","finally","StatRow","_ref5","_c$accent","value","accent","c","red","amber","emerald","slate","total_evaluations","total_allow","total_flag","total_deny","total_critical_violations","total_warning_violations","most_violated_rule_code","last_7_days","previous_7_days","_ref6","w","title","evaluations","deny","flag","DependencyTab","_ref7","_e$response$data$deta3","_e$response2","_e$response2$data","_e$response2$data$det","interfaces","upstream","length","s","system_name","level","sovereignty_level","system_id","downstream","components","component_name","product","canonical_name","vendor_name","vendor_country","zero_cloud_capable","component_id","EvaluationsTab","_ref8","_d$items","PAGE_SIZE","page","setPage","params","page_size","_e$response$data$deta4","_e$response3","_e$response3$data","_e$response3$data$det","items","ev","_ev$violations","_ev$triggered_by","Date","triggered_at","toLocaleString","event_type","violations","v","i","rule_code","triggered_by","event_id","total","onClick","p","Math","max","disabled","has_next","TABS","id","SystemDetail","_ref9","system","onClose","tab","setTab","layer_id","zero_cloud_required","is_active","t","SystemExplorer","systems","setSystems","selected","setSelected","load","res","_ref0","_e$response$data$deta5","_e$response4","_e$response4$data","_e$response4$data$det"],"sources":["/home/kavia/workspace/code-generation/vidartemp-241505/frontend/src/views/SystemExplorer.js"],"sourcesContent":["import React, { useEffect, useState, useCallback } from \"react\";\nimport {\n  Server, ChevronRight, RefreshCw, AlertTriangle,\n  ArrowUpRight, ArrowDownRight, Package, Layers, ChevronLeft\n} from \"lucide-react\";\nimport api from \"../api/client\";\nimport SovereigntyBadge from \"../components/SovereigntyBadge\";\n\n/* ── small helpers ── */\nconst OutcomeBadge = ({ outcome }) => {\n  const map = {\n    DENY:  \"bg-red-500/15 text-red-300 border-red-500/30\",\n    FLAG:  \"bg-amber-500/15 text-amber-300 border-amber-500/30\",\n    ALLOW: \"bg-emerald-500/15 text-emerald-300 border-emerald-500/30\",\n  };\n  return (\n    <span className={`inline-flex px-2 py-0.5 rounded border text-[10px] font-mono font-semibold\n      ${map[outcome] ?? \"bg-slate-700 text-slate-300 border-slate-600\"}`}>\n      {outcome}\n    </span>\n  );\n};\n\nconst Spinner = () => (\n  <RefreshCw size={14} className=\"animate-spin text-slate-500\" />\n);\n\nconst Err = ({ msg }) => (\n  <div className=\"flex items-center gap-2 text-sm text-red-400 bg-red-500/10 border border-red-500/20 rounded px-3 py-2 my-2\">\n    <AlertTriangle size={13} /> {msg}\n  </div>\n);\n\nconst EmptyRow = ({ cols, label }) => (\n  <tr><td colSpan={cols} className=\"py-6 text-center text-slate-600 text-xs\">{label}</td></tr>\n);\n\n/* ────────────────────────────────────────────────────────────\n   Tab: Risk Summary\n──────────────────────────────────────────────────────────── */\nfunction RiskTab({ systemId }) {\n  const [d, setD] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    setD(null); setLoading(true); setError(null);\n    api.get(`/systems/${systemId}/risk-summary`)\n      .then(r => setD(r.data))\n      .catch(e => setError(e?.response?.data?.detail?.message ?? e.message))\n      .finally(() => setLoading(false));\n  }, [systemId]);\n\n  if (loading) return <div className=\"p-4\"><Spinner /></div>;\n  if (error)   return <div className=\"p-4\"><Err msg={error} /></div>;\n  if (!d)      return null;\n\n  const StatRow = ({ label, value, accent }) => {\n    const c = { red: \"text-red-300\", amber: \"text-amber-300\", emerald: \"text-emerald-300\", slate: \"text-slate-200\" };\n    return (\n      <div className=\"flex items-center justify-between py-2 border-b border-slate-800/60 last:border-0\">\n        <span className=\"text-xs text-slate-400\">{label}</span>\n        <span className={`text-sm font-mono font-semibold tabular-nums ${c[accent] ?? c.slate}`}>{value}</span>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"p-4 space-y-4\">\n      {/* All-time */}\n      <div className=\"bg-[#0d0d14] border border-slate-800 rounded-lg p-4\">\n        <p className=\"text-[10px] text-slate-500 font-mono uppercase tracking-widest mb-2\">All Time</p>\n        <StatRow label=\"Total Evaluations\"   value={d.total_evaluations}         accent=\"slate\" />\n        <StatRow label=\"Allow\"               value={d.total_allow}               accent=\"emerald\" />\n        <StatRow label=\"Flag\"                value={d.total_flag}                accent=\"amber\" />\n        <StatRow label=\"Deny\"                value={d.total_deny}                accent=\"red\" />\n        <StatRow label=\"Critical Violations\" value={d.total_critical_violations} accent=\"red\" />\n        <StatRow label=\"Warning Violations\"  value={d.total_warning_violations}  accent=\"amber\" />\n        <StatRow\n          label=\"Most Violated Rule\"\n          value={d.most_violated_rule_code ?? \"—\"}\n          accent={d.most_violated_rule_code ? \"amber\" : \"slate\"}\n        />\n      </div>\n\n      {/* 7-day windows */}\n      <div className=\"grid grid-cols-2 gap-3\">\n        {[ [d.last_7_days, \"Last 7 Days\"], [d.previous_7_days, \"Prev 7 Days\"] ].map(([w, title]) => (\n          <div key={title} className=\"bg-[#0d0d14] border border-slate-800 rounded-lg p-4\">\n            <p className=\"text-[10px] text-slate-500 font-mono uppercase tracking-widest mb-2\">{title}</p>\n            <StatRow label=\"Evaluations\" value={w.evaluations} accent=\"slate\" />\n            <StatRow label=\"Deny\"        value={w.deny}        accent=\"red\" />\n            <StatRow label=\"Flag\"        value={w.flag}        accent=\"amber\" />\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\n/* ────────────────────────────────────────────────────────────\n   Tab: Dependency Map\n──────────────────────────────────────────────────────────── */\nfunction DependencyTab({ systemId }) {\n  const [d, setD] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    setD(null); setLoading(true); setError(null);\n    api.get(`/systems/${systemId}/dependency-map`)\n      .then(r => setD(r.data))\n      .catch(e => setError(e?.response?.data?.detail?.message ?? e.message))\n      .finally(() => setLoading(false));\n  }, [systemId]);\n\n  if (loading) return <div className=\"p-4\"><Spinner /></div>;\n  if (error)   return <div className=\"p-4\"><Err msg={error} /></div>;\n  if (!d)      return null;\n\n  return (\n    <div className=\"p-4 space-y-5\">\n      {/* Interfaces */}\n      <div className=\"grid grid-cols-2 gap-3\">\n        {/* Upstream */}\n        <div className=\"bg-[#0d0d14] border border-slate-800 rounded-lg p-4\">\n          <div className=\"flex items-center gap-2 mb-3\">\n            <ArrowUpRight size={13} className=\"text-indigo-400\" />\n            <p className=\"text-[10px] text-slate-500 font-mono uppercase tracking-widest\">Upstream ({d.interfaces.upstream.length})</p>\n          </div>\n          {d.interfaces.upstream.length === 0\n            ? <p className=\"text-xs text-slate-600\">No upstream interfaces</p>\n            : d.interfaces.upstream.map(s => (\n                <div key={s.system_id} className=\"flex items-center justify-between py-1.5 border-b border-slate-800/40 last:border-0\">\n                  <span className=\"text-xs text-slate-300 font-mono truncate max-w-[120px]\">{s.system_name}</span>\n                  <SovereigntyBadge level={s.sovereignty_level} />\n                </div>\n              ))\n          }\n        </div>\n\n        {/* Downstream */}\n        <div className=\"bg-[#0d0d14] border border-slate-800 rounded-lg p-4\">\n          <div className=\"flex items-center gap-2 mb-3\">\n            <ArrowDownRight size={13} className=\"text-slate-400\" />\n            <p className=\"text-[10px] text-slate-500 font-mono uppercase tracking-widest\">Downstream ({d.interfaces.downstream.length})</p>\n          </div>\n          {d.interfaces.downstream.length === 0\n            ? <p className=\"text-xs text-slate-600\">No downstream interfaces</p>\n            : d.interfaces.downstream.map(s => (\n                <div key={s.system_id} className=\"flex items-center justify-between py-1.5 border-b border-slate-800/40 last:border-0\">\n                  <span className=\"text-xs text-slate-300 font-mono truncate max-w-[120px]\">{s.system_name}</span>\n                  <SovereigntyBadge level={s.sovereignty_level} />\n                </div>\n              ))\n          }\n        </div>\n      </div>\n\n      {/* Components */}\n      <div className=\"bg-[#0d0d14] border border-slate-800 rounded-lg overflow-hidden\">\n        <div className=\"flex items-center gap-2 px-4 py-3 border-b border-slate-800\">\n          <Layers size={13} className=\"text-slate-500\" />\n          <p className=\"text-[10px] text-slate-500 font-mono uppercase tracking-widest\">Active Components ({d.components.length})</p>\n        </div>\n        {d.components.length === 0\n          ? <p className=\"px-4 py-5 text-xs text-slate-600\">No active components</p>\n          : (\n            <table className=\"w-full text-xs\">\n              <thead>\n                <tr className=\"border-b border-slate-800 text-slate-500 font-mono text-[10px] uppercase tracking-wide\">\n                  <th className=\"text-left px-4 py-2\">Component</th>\n                  <th className=\"text-left px-4 py-2\">Sovereignty</th>\n                  <th className=\"text-left px-4 py-2\">Product</th>\n                  <th className=\"text-left px-4 py-2\">Vendor</th>\n                  <th className=\"text-left px-4 py-2\">Product Sov.</th>\n                  <th className=\"text-left px-4 py-2\">Zero Cloud</th>\n                </tr>\n              </thead>\n              <tbody>\n                {d.components.map(c => (\n                  <tr key={c.component_id} className=\"border-b border-slate-800/40 last:border-0 hover:bg-slate-800/20 transition-colors\">\n                    <td className=\"px-4 py-2.5 text-slate-200 font-mono\">{c.component_name}</td>\n                    <td className=\"px-4 py-2.5\"><SovereigntyBadge level={c.sovereignty_level} /></td>\n                    {c.product ? (\n                      <>\n                        <td className=\"px-4 py-2.5 text-slate-300\">\n                          <div className=\"flex items-center gap-1.5\">\n                            <Package size={11} className=\"text-indigo-400\" />\n                            {c.product.canonical_name}\n                          </div>\n                        </td>\n                        <td className=\"px-4 py-2.5 text-slate-400\">{c.product.vendor_name} <span className=\"text-slate-600\">({c.product.vendor_country})</span></td>\n                        <td className=\"px-4 py-2.5\"><SovereigntyBadge level={c.product.sovereignty_level} /></td>\n                        <td className=\"px-4 py-2.5\">\n                          <span className={c.product.zero_cloud_capable\n                            ? \"text-emerald-400\"\n                            : \"text-red-400\"}>\n                            {c.product.zero_cloud_capable ? \"Yes\" : \"No\"}\n                          </span>\n                        </td>\n                      </>\n                    ) : (\n                      <td colSpan={4} className=\"px-4 py-2.5 text-slate-600 italic\">No product linked</td>\n                    )}\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          )\n        }\n      </div>\n    </div>\n  );\n}\n\n/* ────────────────────────────────────────────────────────────\n   Tab: Recent Evaluations\n──────────────────────────────────────────────────────────── */\nfunction EvaluationsTab({ systemId }) {\n  const PAGE_SIZE = 10;\n  const [page,    setPage]    = useState(1);\n  const [d,       setD]       = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error,   setError]   = useState(null);\n\n  useEffect(() => {\n    setD(null); setLoading(true); setError(null);\n    api.get(`/systems/${systemId}/evaluation-history`, {\n      params: { page, page_size: PAGE_SIZE },\n    })\n      .then(r => setD(r.data))\n      .catch(e => setError(e?.response?.data?.detail?.message ?? e.message))\n      .finally(() => setLoading(false));\n  }, [systemId, page]);\n\n  // reset page when system changes\n  useEffect(() => { setPage(1); }, [systemId]);\n\n  if (loading) return <div className=\"p-4\"><Spinner /></div>;\n  if (error)   return <div className=\"p-4\"><Err msg={error} /></div>;\n  if (!d)      return null;\n\n  const items = d.items ?? [];\n\n  return (\n    <div className=\"p-4\">\n      <div className=\"bg-[#0d0d14] border border-slate-800 rounded-lg overflow-hidden\">\n        <table className=\"w-full text-xs\">\n          <thead>\n            <tr className=\"border-b border-slate-800 text-slate-500 font-mono text-[10px] uppercase tracking-wide\">\n              <th className=\"text-left px-4 py-2\">Triggered</th>\n              <th className=\"text-left px-4 py-2\">Event Type</th>\n              <th className=\"text-left px-4 py-2\">Outcome</th>\n              <th className=\"text-left px-4 py-2\">Violations</th>\n              <th className=\"text-left px-4 py-2\">Triggered By</th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.length === 0\n              ? <EmptyRow cols={5} label=\"No evaluations\" />\n              : items.map(ev => (\n                  <tr key={ev.event_id} className=\"border-b border-slate-800/40 last:border-0 hover:bg-slate-800/20 transition-colors\">\n                    <td className=\"px-4 py-2.5 text-slate-500 font-mono whitespace-nowrap\">\n                      {new Date(ev.triggered_at).toLocaleString()}\n                    </td>\n                    <td className=\"px-4 py-2.5 text-slate-400 font-mono\">{ev.event_type}</td>\n                    <td className=\"px-4 py-2.5\"><OutcomeBadge outcome={ev.outcome} /></td>\n                    <td className=\"px-4 py-2.5\">\n                      {ev.violations?.length > 0 ? (\n                        <div className=\"flex flex-wrap gap-1\">\n                          {ev.violations.map((v, i) => (\n                            <span key={i}\n                              className=\"text-[10px] font-mono px-1.5 py-0.5 rounded bg-slate-700 text-slate-400\">\n                              {v.rule_code}\n                            </span>\n                          ))}\n                        </div>\n                      ) : (\n                        <span className=\"text-slate-700\">—</span>\n                      )}\n                    </td>\n                    <td className=\"px-4 py-2.5 text-slate-500 font-mono\">{ev.triggered_by ?? \"—\"}</td>\n                  </tr>\n                ))\n            }\n          </tbody>\n        </table>\n      </div>\n\n      {/* Pagination */}\n      <div className=\"flex items-center justify-between mt-3\">\n        <span className=\"text-[11px] text-slate-600 font-mono\">\n          {d.total} evaluation{d.total !== 1 ? \"s\" : \"\"} total\n        </span>\n        <div className=\"flex items-center gap-2\">\n          <button\n            onClick={() => setPage(p => Math.max(1, p - 1))}\n            disabled={page === 1 || loading}\n            className=\"p-1.5 rounded border border-slate-700 text-slate-400 hover:text-slate-200 hover:border-slate-600 disabled:opacity-30 transition-colors\"\n          >\n            <ChevronLeft size={13} />\n          </button>\n          <span className=\"text-[11px] text-slate-500 font-mono\">page {page}</span>\n          <button\n            onClick={() => setPage(p => p + 1)}\n            disabled={!d.has_next || loading}\n            className=\"p-1.5 rounded border border-slate-700 text-slate-400 hover:text-slate-200 hover:border-slate-600 disabled:opacity-30 transition-colors\"\n          >\n            <ChevronRight size={13} />\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n/* ────────────────────────────────────────────────────────────\n   System Detail Panel\n──────────────────────────────────────────────────────────── */\nconst TABS = [\n  { id: \"risk\",   label: \"Risk Summary\" },\n  { id: \"map\",    label: \"Dependency Map\" },\n  { id: \"evals\",  label: \"Evaluations\" },\n];\n\nfunction SystemDetail({ system, onClose }) {\n  const [tab, setTab] = useState(\"risk\");\n\n  return (\n    <div className=\"flex flex-col h-full\">\n      {/* Detail header */}\n      <div className=\"px-4 py-3 border-b border-slate-800 flex items-start justify-between\">\n        <div>\n          <div className=\"flex items-center gap-2\">\n            <Server size={14} className=\"text-indigo-400\" />\n            <span className=\"text-sm font-semibold text-slate-100 font-mono\">{system.system_name}</span>\n          </div>\n          <div className=\"flex items-center gap-2 mt-1.5\">\n            <span className=\"text-[10px] text-slate-600 font-mono\">L{system.layer_id}</span>\n            <SovereigntyBadge level={system.sovereignty_level} />\n            {system.zero_cloud_required && (\n              <span className=\"text-[10px] text-indigo-400 border border-indigo-500/30 bg-indigo-500/10 px-1.5 py-0.5 rounded font-mono\">ZERO-CLOUD</span>\n            )}\n            {!system.is_active && (\n              <span className=\"text-[10px] text-slate-500 border border-slate-700 px-1.5 py-0.5 rounded font-mono\">INACTIVE</span>\n            )}\n          </div>\n        </div>\n        <button\n          onClick={onClose}\n          className=\"text-slate-600 hover:text-slate-300 text-xs transition-colors\"\n        >\n          ✕\n        </button>\n      </div>\n\n      {/* Tabs */}\n      <div className=\"flex border-b border-slate-800\">\n        {TABS.map(t => (\n          <button\n            key={t.id}\n            onClick={() => setTab(t.id)}\n            className={`px-4 py-2.5 text-[11px] font-mono uppercase tracking-wide transition-colors border-b-2 ${\n              tab === t.id\n                ? \"border-indigo-500 text-indigo-300\"\n                : \"border-transparent text-slate-500 hover:text-slate-300\"\n            }`}\n          >\n            {t.label}\n          </button>\n        ))}\n      </div>\n\n      {/* Tab content */}\n      <div className=\"flex-1 overflow-y-auto\">\n        {tab === \"risk\"  && <RiskTab        systemId={system.system_id} />}\n        {tab === \"map\"   && <DependencyTab  systemId={system.system_id} />}\n        {tab === \"evals\" && <EvaluationsTab systemId={system.system_id} />}\n      </div>\n    </div>\n  );\n}\n\n/* ────────────────────────────────────────────────────────────\n   System Explorer (root view)\n──────────────────────────────────────────────────────────── */\nexport default function SystemExplorer() {\n  const [systems,  setSystems]  = useState([]);\n  const [loading,  setLoading]  = useState(true);\n  const [error,    setError]    = useState(null);\n  const [selected, setSelected] = useState(null);\n\n  const load = useCallback(async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const res = await api.get(\"/systems\");\n      setSystems(res.data);\n    } catch (e) {\n      setError(e?.response?.data?.detail?.message ?? e.message ?? \"Request failed\");\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => { load(); }, [load]);\n\n  return (\n    <div className=\"flex h-full\">\n      {/* System list */}\n      <div className=\"w-72 flex-shrink-0 border-r border-slate-800 flex flex-col\">\n        <div className=\"px-4 py-3 border-b border-slate-800 flex items-center justify-between\">\n          <h1 className=\"text-sm font-semibold text-slate-100\">Systems</h1>\n          <button onClick={load} disabled={loading}\n            className=\"text-slate-500 hover:text-slate-300 transition-colors disabled:opacity-40\">\n            <RefreshCw size={13} className={loading ? \"animate-spin\" : \"\"} />\n          </button>\n        </div>\n\n        {error && <div className=\"p-3\"><Err msg={error} /></div>}\n        {loading && !systems.length && (\n          <div className=\"p-4 text-xs text-slate-600 animate-pulse\">Loading systems…</div>\n        )}\n\n        <div className=\"flex-1 overflow-y-auto\">\n          {systems.map(s => (\n            <button\n              key={s.system_id}\n              onClick={() => setSelected(s)}\n              className={`w-full text-left px-4 py-3 border-b border-slate-800/50 transition-colors flex items-center justify-between group ${\n                selected?.system_id === s.system_id\n                  ? \"bg-indigo-600/10 border-l-2 border-l-indigo-500\"\n                  : \"hover:bg-slate-800/40 border-l-2 border-l-transparent\"\n              }`}\n            >\n              <div className=\"min-w-0\">\n                <p className={`text-xs font-mono truncate ${\n                  selected?.system_id === s.system_id ? \"text-indigo-200\" : \"text-slate-300\"\n                }`}>{s.system_name}</p>\n                <div className=\"flex items-center gap-2 mt-1\">\n                  <span className=\"text-[10px] text-slate-600 font-mono\">L{s.layer_id}</span>\n                  <SovereigntyBadge level={s.sovereignty_level} />\n                  {!s.is_active && (\n                    <span className=\"text-[10px] text-slate-600\">inactive</span>\n                  )}\n                </div>\n              </div>\n              <ChevronRight size={13}\n                className={`flex-shrink-0 ml-2 transition-colors ${\n                  selected?.system_id === s.system_id ? \"text-indigo-400\" : \"text-slate-700 group-hover:text-slate-500\"\n                }`}\n              />\n            </button>\n          ))}\n          {!loading && systems.length === 0 && (\n            <p className=\"px-4 py-6 text-xs text-slate-600 text-center\">No systems registered</p>\n          )}\n        </div>\n\n        <div className=\"px-4 py-2 border-t border-slate-800\">\n          <p className=\"text-[10px] text-slate-700 font-mono\">{systems.length} system{systems.length !== 1 ? \"s\" : \"\"}</p>\n        </div>\n      </div>\n\n      {/* Detail panel */}\n      <div className=\"flex-1 min-w-0 overflow-hidden\">\n        {selected ? (\n          <SystemDetail\n            system={selected}\n            onClose={() => setSelected(null)}\n          />\n        ) : (\n          <div className=\"flex flex-col items-center justify-center h-full text-center px-8\">\n            <Server size={32} className=\"text-slate-700 mb-3\" />\n            <p className=\"text-sm text-slate-500\">Select a system to inspect</p>\n            <p className=\"text-xs text-slate-700 mt-1\">Risk summary · Dependency map · Evaluations</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}