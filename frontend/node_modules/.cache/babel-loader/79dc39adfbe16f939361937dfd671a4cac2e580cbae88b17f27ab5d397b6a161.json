{"ast":null,"code":"import axios from\"axios\";const BASE=process.env.REACT_APP_BACKEND_URL;// IMPORTANT SECURITY NOTE:\n// CRA exposes all REACT_APP_* values to the browser bundle; they are not secrets.\n// The previous implementation read REACT_APP_INTERNAL_UI_SECRET and sent it as\n// X-Internal-UI on every request, which is unsafe because it leaks any \"secret\"\n// into client code.\n//\n// To preserve behavior where possible without shipping a secret in the bundle,\n// we allow an optional *runtime-injected* token to be used, if present.\n// Typical approaches include setting a global in index.html or injecting via the\n// hosting environment at request-time (reverse proxy templating).\n//\n// If no runtime token is present, we simply omit X-Internal-UI.\n// The backend must treat this as unauthenticated and handle accordingly.\nconst RUNTIME_INTERNAL_UI_TOKEN=typeof window!==\"undefined\"&&window.__APP_CONFIG__&&window.__APP_CONFIG__.INTERNAL_UI_TOKEN||typeof window!==\"undefined\"&&window.__INTERNAL_UI_TOKEN__||null;// All dashboard calls go through the server-side BFF proxy.\n// The API key is injected by the backend — it is never present in client code.\n// The X-Internal-UI header authenticates the frontend to the BFF proxy (when provided).\nconst api=axios.create({baseURL:\"\".concat(BASE,\"/api/internal\"),headers:{\"Content-Type\":\"application/json\"}});// Attach the internal UI header only if a runtime token is available.\napi.interceptors.request.use(config=>{if(RUNTIME_INTERNAL_UI_TOKEN){config.headers=config.headers||{};config.headers[\"X-Internal-UI\"]=RUNTIME_INTERNAL_UI_TOKEN;}return config;});export default api;","map":{"version":3,"names":["axios","BASE","process","env","REACT_APP_BACKEND_URL","RUNTIME_INTERNAL_UI_TOKEN","window","__APP_CONFIG__","INTERNAL_UI_TOKEN","__INTERNAL_UI_TOKEN__","api","create","baseURL","concat","headers","interceptors","request","use","config"],"sources":["/home/kavia/workspace/code-generation/vidartemp-241505/frontend/src/api/client.js"],"sourcesContent":["import axios from \"axios\";\n\nconst BASE = process.env.REACT_APP_BACKEND_URL;\n\n// IMPORTANT SECURITY NOTE:\n// CRA exposes all REACT_APP_* values to the browser bundle; they are not secrets.\n// The previous implementation read REACT_APP_INTERNAL_UI_SECRET and sent it as\n// X-Internal-UI on every request, which is unsafe because it leaks any \"secret\"\n// into client code.\n//\n// To preserve behavior where possible without shipping a secret in the bundle,\n// we allow an optional *runtime-injected* token to be used, if present.\n// Typical approaches include setting a global in index.html or injecting via the\n// hosting environment at request-time (reverse proxy templating).\n//\n// If no runtime token is present, we simply omit X-Internal-UI.\n// The backend must treat this as unauthenticated and handle accordingly.\nconst RUNTIME_INTERNAL_UI_TOKEN =\n  (typeof window !== \"undefined\" &&\n    window.__APP_CONFIG__ &&\n    window.__APP_CONFIG__.INTERNAL_UI_TOKEN) ||\n  (typeof window !== \"undefined\" && window.__INTERNAL_UI_TOKEN__) ||\n  null;\n\n// All dashboard calls go through the server-side BFF proxy.\n// The API key is injected by the backend — it is never present in client code.\n// The X-Internal-UI header authenticates the frontend to the BFF proxy (when provided).\nconst api = axios.create({\n  baseURL: `${BASE}/api/internal`,\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n\n// Attach the internal UI header only if a runtime token is available.\napi.interceptors.request.use((config) => {\n  if (RUNTIME_INTERNAL_UI_TOKEN) {\n    config.headers = config.headers || {};\n    config.headers[\"X-Internal-UI\"] = RUNTIME_INTERNAL_UI_TOKEN;\n  }\n  return config;\n});\n\nexport default api;\n\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB,KAAM,CAAAC,IAAI,CAAGC,OAAO,CAACC,GAAG,CAACC,qBAAqB,CAE9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAM,CAAAC,yBAAyB,CAC5B,MAAO,CAAAC,MAAM,GAAK,WAAW,EAC5BA,MAAM,CAACC,cAAc,EACrBD,MAAM,CAACC,cAAc,CAACC,iBAAiB,EACxC,MAAO,CAAAF,MAAM,GAAK,WAAW,EAAIA,MAAM,CAACG,qBAAsB,EAC/D,IAAI,CAEN;AACA;AACA;AACA,KAAM,CAAAC,GAAG,CAAGV,KAAK,CAACW,MAAM,CAAC,CACvBC,OAAO,IAAAC,MAAA,CAAKZ,IAAI,iBAAe,CAC/Ba,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC,CAEF;AACAJ,GAAG,CAACK,YAAY,CAACC,OAAO,CAACC,GAAG,CAAEC,MAAM,EAAK,CACvC,GAAIb,yBAAyB,CAAE,CAC7Ba,MAAM,CAACJ,OAAO,CAAGI,MAAM,CAACJ,OAAO,EAAI,CAAC,CAAC,CACrCI,MAAM,CAACJ,OAAO,CAAC,eAAe,CAAC,CAAGT,yBAAyB,CAC7D,CACA,MAAO,CAAAa,MAAM,CACf,CAAC,CAAC,CAEF,cAAe,CAAAR,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}