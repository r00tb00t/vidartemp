{"ast":null,"code":"import React,{useEffect,useState,useCallback}from\"react\";import{Server,ChevronRight,RefreshCw,AlertTriangle,ArrowUpRight,ArrowDownRight,Package,Layers,ChevronLeft}from\"lucide-react\";import api from\"../api/client\";import SovereigntyBadge from\"../components/SovereigntyBadge\";/* ── small helpers ── */import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const OutcomeBadge=_ref=>{var _map$outcome;let{outcome}=_ref;const map={DENY:\"bg-red-500/15 text-red-300 border-red-500/30\",FLAG:\"bg-amber-500/15 text-amber-300 border-amber-500/30\",ALLOW:\"bg-emerald-500/15 text-emerald-300 border-emerald-500/30\"};return/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex px-2 py-0.5 rounded border text-[10px] font-mono font-semibold\\n      \".concat((_map$outcome=map[outcome])!==null&&_map$outcome!==void 0?_map$outcome:\"bg-slate-700 text-slate-300 border-slate-600\"),children:outcome});};const Spinner=()=>/*#__PURE__*/_jsx(RefreshCw,{size:14,className:\"animate-spin text-slate-500\"});const Err=_ref2=>{let{msg}=_ref2;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-sm text-red-400 bg-red-500/10 border border-red-500/20 rounded px-3 py-2 my-2\",children:[/*#__PURE__*/_jsx(AlertTriangle,{size:13}),\" \",msg]});};const EmptyRow=_ref3=>{let{cols,label}=_ref3;return/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:cols,className:\"py-6 text-center text-slate-600 text-xs\",children:label})});};/* ────────────────────────────────────────────────────────────\n   Tab: Risk Summary\n──────────────────────────────────────────────────────────── */function RiskTab(_ref4){var _d$most_violated_rule;let{systemId}=_ref4;const[d,setD]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{setD(null);setLoading(true);setError(null);api.get(\"/systems/\".concat(systemId,\"/risk-summary\")).then(r=>setD(r.data)).catch(e=>{var _e$response$data$deta,_e$response,_e$response$data,_e$response$data$deta2;return setError((_e$response$data$deta=e===null||e===void 0?void 0:(_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:(_e$response$data$deta2=_e$response$data.detail)===null||_e$response$data$deta2===void 0?void 0:_e$response$data$deta2.message)!==null&&_e$response$data$deta!==void 0?_e$response$data$deta:e.message);}).finally(()=>setLoading(false));},[systemId]);if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"p-4\",children:/*#__PURE__*/_jsx(Spinner,{})});if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"p-4\",children:/*#__PURE__*/_jsx(Err,{msg:error})});if(!d)return null;const StatRow=_ref5=>{var _c$accent;let{label,value,accent}=_ref5;const c={red:\"text-red-300\",amber:\"text-amber-300\",emerald:\"text-emerald-300\",slate:\"text-slate-200\"};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between py-2 border-b border-slate-800/60 last:border-0\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-slate-400\",children:label}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-mono font-semibold tabular-nums \".concat((_c$accent=c[accent])!==null&&_c$accent!==void 0?_c$accent:c.slate),children:value})]});};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-[#0d0d14] border border-slate-800 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-[10px] text-slate-500 font-mono uppercase tracking-widest mb-2\",children:\"All Time\"}),/*#__PURE__*/_jsx(StatRow,{label:\"Total Evaluations\",value:d.total_evaluations,accent:\"slate\"}),/*#__PURE__*/_jsx(StatRow,{label:\"Allow\",value:d.total_allow,accent:\"emerald\"}),/*#__PURE__*/_jsx(StatRow,{label:\"Flag\",value:d.total_flag,accent:\"amber\"}),/*#__PURE__*/_jsx(StatRow,{label:\"Deny\",value:d.total_deny,accent:\"red\"}),/*#__PURE__*/_jsx(StatRow,{label:\"Critical Violations\",value:d.total_critical_violations,accent:\"red\"}),/*#__PURE__*/_jsx(StatRow,{label:\"Warning Violations\",value:d.total_warning_violations,accent:\"amber\"}),/*#__PURE__*/_jsx(StatRow,{label:\"Most Violated Rule\",value:(_d$most_violated_rule=d.most_violated_rule_code)!==null&&_d$most_violated_rule!==void 0?_d$most_violated_rule:\"—\",accent:d.most_violated_rule_code?\"amber\":\"slate\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[[d.last_7_days,\"Last 7 Days\"],[d.previous_7_days,\"Prev 7 Days\"]].map(_ref6=>{let[w,title]=_ref6;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-[#0d0d14] border border-slate-800 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-[10px] text-slate-500 font-mono uppercase tracking-widest mb-2\",children:title}),/*#__PURE__*/_jsx(StatRow,{label:\"Evaluations\",value:w.evaluations,accent:\"slate\"}),/*#__PURE__*/_jsx(StatRow,{label:\"Deny\",value:w.deny,accent:\"red\"}),/*#__PURE__*/_jsx(StatRow,{label:\"Flag\",value:w.flag,accent:\"amber\"})]},title);})})]});}/* ────────────────────────────────────────────────────────────\n   Tab: Dependency Map\n──────────────────────────────────────────────────────────── */function DependencyTab(_ref7){let{systemId}=_ref7;const[d,setD]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{setD(null);setLoading(true);setError(null);api.get(\"/systems/\".concat(systemId,\"/dependency-map\")).then(r=>setD(r.data)).catch(e=>{var _e$response$data$deta3,_e$response2,_e$response2$data,_e$response2$data$det;return setError((_e$response$data$deta3=e===null||e===void 0?void 0:(_e$response2=e.response)===null||_e$response2===void 0?void 0:(_e$response2$data=_e$response2.data)===null||_e$response2$data===void 0?void 0:(_e$response2$data$det=_e$response2$data.detail)===null||_e$response2$data$det===void 0?void 0:_e$response2$data$det.message)!==null&&_e$response$data$deta3!==void 0?_e$response$data$deta3:e.message);}).finally(()=>setLoading(false));},[systemId]);if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"p-4\",children:/*#__PURE__*/_jsx(Spinner,{})});if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"p-4\",children:/*#__PURE__*/_jsx(Err,{msg:error})});if(!d)return null;return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 space-y-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-[#0d0d14] border border-slate-800 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-3\",children:[/*#__PURE__*/_jsx(ArrowUpRight,{size:13,className:\"text-indigo-400\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-[10px] text-slate-500 font-mono uppercase tracking-widest\",children:[\"Upstream (\",d.interfaces.upstream.length,\")\"]})]}),d.interfaces.upstream.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-600\",children:\"No upstream interfaces\"}):d.interfaces.upstream.map(s=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between py-1.5 border-b border-slate-800/40 last:border-0\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-slate-300 font-mono truncate max-w-[120px]\",children:s.system_name}),/*#__PURE__*/_jsx(SovereigntyBadge,{level:s.sovereignty_level})]},s.system_id))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-[#0d0d14] border border-slate-800 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-3\",children:[/*#__PURE__*/_jsx(ArrowDownRight,{size:13,className:\"text-slate-400\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-[10px] text-slate-500 font-mono uppercase tracking-widest\",children:[\"Downstream (\",d.interfaces.downstream.length,\")\"]})]}),d.interfaces.downstream.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-600\",children:\"No downstream interfaces\"}):d.interfaces.downstream.map(s=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between py-1.5 border-b border-slate-800/40 last:border-0\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-slate-300 font-mono truncate max-w-[120px]\",children:s.system_name}),/*#__PURE__*/_jsx(SovereigntyBadge,{level:s.sovereignty_level})]},s.system_id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-[#0d0d14] border border-slate-800 rounded-lg overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 px-4 py-3 border-b border-slate-800\",children:[/*#__PURE__*/_jsx(Layers,{size:13,className:\"text-slate-500\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-[10px] text-slate-500 font-mono uppercase tracking-widest\",children:[\"Active Components (\",d.components.length,\")\"]})]}),d.components.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"px-4 py-5 text-xs text-slate-600\",children:\"No active components\"}):/*#__PURE__*/_jsxs(\"table\",{className:\"w-full text-xs\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-slate-800 text-slate-500 font-mono text-[10px] uppercase tracking-wide\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"text-left px-4 py-2\",children:\"Component\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left px-4 py-2\",children:\"Sovereignty\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left px-4 py-2\",children:\"Product\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left px-4 py-2\",children:\"Vendor\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left px-4 py-2\",children:\"Product Sov.\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left px-4 py-2\",children:\"Zero Cloud\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:d.components.map(c=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-slate-800/40 last:border-0 hover:bg-slate-800/20 transition-colors\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2.5 text-slate-200 font-mono\",children:c.component_name}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2.5\",children:/*#__PURE__*/_jsx(SovereigntyBadge,{level:c.sovereignty_level})}),c.product?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2.5 text-slate-300\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1.5\",children:[/*#__PURE__*/_jsx(Package,{size:11,className:\"text-indigo-400\"}),c.product.canonical_name]})}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-4 py-2.5 text-slate-400\",children:[c.product.vendor_name,\" \",/*#__PURE__*/_jsxs(\"span\",{className:\"text-slate-600\",children:[\"(\",c.product.vendor_country,\")\"]})]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2.5\",children:/*#__PURE__*/_jsx(SovereigntyBadge,{level:c.product.sovereignty_level})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2.5\",children:/*#__PURE__*/_jsx(\"span\",{className:c.product.zero_cloud_capable?\"text-emerald-400\":\"text-red-400\",children:c.product.zero_cloud_capable?\"Yes\":\"No\"})})]}):/*#__PURE__*/_jsx(\"td\",{colSpan:4,className:\"px-4 py-2.5 text-slate-600 italic\",children:\"No product linked\"})]},c.component_id))})]})]})]});}/* ────────────────────────────────────────────────────────────\n   Tab: Recent Evaluations\n──────────────────────────────────────────────────────────── */function EvaluationsTab(_ref8){var _d$items;let{systemId}=_ref8;const PAGE_SIZE=10;const[page,setPage]=useState(1);const[d,setD]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{setD(null);setLoading(true);setError(null);api.get(\"/systems/\".concat(systemId,\"/evaluation-history\"),{params:{page,page_size:PAGE_SIZE}}).then(r=>setD(r.data)).catch(e=>{var _e$response$data$deta4,_e$response3,_e$response3$data,_e$response3$data$det;return setError((_e$response$data$deta4=e===null||e===void 0?void 0:(_e$response3=e.response)===null||_e$response3===void 0?void 0:(_e$response3$data=_e$response3.data)===null||_e$response3$data===void 0?void 0:(_e$response3$data$det=_e$response3$data.detail)===null||_e$response3$data$det===void 0?void 0:_e$response3$data$det.message)!==null&&_e$response$data$deta4!==void 0?_e$response$data$deta4:e.message);}).finally(()=>setLoading(false));},[systemId,page]);// reset page when system changes\nuseEffect(()=>{setPage(1);},[systemId]);if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"p-4\",children:/*#__PURE__*/_jsx(Spinner,{})});if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"p-4\",children:/*#__PURE__*/_jsx(Err,{msg:error})});if(!d)return null;const items=(_d$items=d.items)!==null&&_d$items!==void 0?_d$items:[];return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-[#0d0d14] border border-slate-800 rounded-lg overflow-hidden\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full text-xs\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-slate-800 text-slate-500 font-mono text-[10px] uppercase tracking-wide\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"text-left px-4 py-2\",children:\"Triggered\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left px-4 py-2\",children:\"Event Type\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left px-4 py-2\",children:\"Outcome\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left px-4 py-2\",children:\"Violations\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left px-4 py-2\",children:\"Triggered By\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:items.length===0?/*#__PURE__*/_jsx(EmptyRow,{cols:5,label:\"No evaluations\"}):items.map(ev=>{var _ev$violations,_ev$triggered_by;return/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-slate-800/40 last:border-0 hover:bg-slate-800/20 transition-colors\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2.5 text-slate-500 font-mono whitespace-nowrap\",children:new Date(ev.triggered_at).toLocaleString()}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2.5 text-slate-400 font-mono\",children:ev.event_type}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2.5\",children:/*#__PURE__*/_jsx(OutcomeBadge,{outcome:ev.outcome})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2.5\",children:((_ev$violations=ev.violations)===null||_ev$violations===void 0?void 0:_ev$violations.length)>0?/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-1\",children:ev.violations.map((v,i)=>/*#__PURE__*/_jsx(\"span\",{className:\"text-[10px] font-mono px-1.5 py-0.5 rounded bg-slate-700 text-slate-400\",children:v.rule_code},i))}):/*#__PURE__*/_jsx(\"span\",{className:\"text-slate-700\",children:\"\\u2014\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2.5 text-slate-500 font-mono\",children:(_ev$triggered_by=ev.triggered_by)!==null&&_ev$triggered_by!==void 0?_ev$triggered_by:\"—\"})]},ev.event_id);})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mt-3\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-[11px] text-slate-600 font-mono\",children:[d.total,\" evaluation\",d.total!==1?\"s\":\"\",\" total\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPage(p=>Math.max(1,p-1)),disabled:page===1||loading,className:\"p-1.5 rounded border border-slate-700 text-slate-400 hover:text-slate-200 hover:border-slate-600 disabled:opacity-30 transition-colors\",children:/*#__PURE__*/_jsx(ChevronLeft,{size:13})}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-[11px] text-slate-500 font-mono\",children:[\"page \",page]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPage(p=>p+1),disabled:!d.has_next||loading,className:\"p-1.5 rounded border border-slate-700 text-slate-400 hover:text-slate-200 hover:border-slate-600 disabled:opacity-30 transition-colors\",children:/*#__PURE__*/_jsx(ChevronRight,{size:13})})]})]})]});}/* ────────────────────────────────────────────────────────────\n   System Detail Panel\n──────────────────────────────────────────────────────────── */const TABS=[{id:\"risk\",label:\"Risk Summary\"},{id:\"map\",label:\"Dependency Map\"},{id:\"evals\",label:\"Evaluations\"}];function SystemDetail(_ref9){let{system,onClose}=_ref9;const[tab,setTab]=useState(\"risk\");return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col h-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-3 border-b border-slate-800 flex items-start justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Server,{size:14,className:\"text-indigo-400\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold text-slate-100 font-mono\",children:system.system_name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mt-1.5\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-[10px] text-slate-600 font-mono\",children:[\"L\",system.layer_id]}),/*#__PURE__*/_jsx(SovereigntyBadge,{level:system.sovereignty_level}),system.zero_cloud_required&&/*#__PURE__*/_jsx(\"span\",{className:\"text-[10px] text-indigo-400 border border-indigo-500/30 bg-indigo-500/10 px-1.5 py-0.5 rounded font-mono\",children:\"ZERO-CLOUD\"}),!system.is_active&&/*#__PURE__*/_jsx(\"span\",{className:\"text-[10px] text-slate-500 border border-slate-700 px-1.5 py-0.5 rounded font-mono\",children:\"INACTIVE\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-slate-600 hover:text-slate-300 text-xs transition-colors\",children:\"\\u2715\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex border-b border-slate-800\",children:TABS.map(t=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setTab(t.id),className:\"px-4 py-2.5 text-[11px] font-mono uppercase tracking-wide transition-colors border-b-2 \".concat(tab===t.id?\"border-indigo-500 text-indigo-300\":\"border-transparent text-slate-500 hover:text-slate-300\"),children:t.label},t.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 overflow-y-auto\",children:[tab===\"risk\"&&/*#__PURE__*/_jsx(RiskTab,{systemId:system.system_id}),tab===\"map\"&&/*#__PURE__*/_jsx(DependencyTab,{systemId:system.system_id}),tab===\"evals\"&&/*#__PURE__*/_jsx(EvaluationsTab,{systemId:system.system_id})]})]});}/* ────────────────────────────────────────────────────────────\n   System Explorer (root view)\n──────────────────────────────────────────────────────────── */export default function SystemExplorer(){const[systems,setSystems]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[selected,setSelected]=useState(null);const load=useCallback(async()=>{setLoading(true);setError(null);try{const res=await api.get(\"/systems\");setSystems(res.data);}catch(e){var _ref0,_e$response$data$deta5,_e$response4,_e$response4$data,_e$response4$data$det;setError((_ref0=(_e$response$data$deta5=e===null||e===void 0?void 0:(_e$response4=e.response)===null||_e$response4===void 0?void 0:(_e$response4$data=_e$response4.data)===null||_e$response4$data===void 0?void 0:(_e$response4$data$det=_e$response4$data.detail)===null||_e$response4$data$det===void 0?void 0:_e$response4$data$det.message)!==null&&_e$response$data$deta5!==void 0?_e$response$data$deta5:e.message)!==null&&_ref0!==void 0?_ref0:\"Request failed\");}finally{setLoading(false);}},[]);useEffect(()=>{load();},[load]);return/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-72 flex-shrink-0 border-r border-slate-800 flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-3 border-b border-slate-800 flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-sm font-semibold text-slate-100\",children:\"Systems\"}),/*#__PURE__*/_jsx(\"button\",{onClick:load,disabled:loading,className:\"text-slate-500 hover:text-slate-300 transition-colors disabled:opacity-40\",children:/*#__PURE__*/_jsx(RefreshCw,{size:13,className:loading?\"animate-spin\":\"\"})})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"p-3\",children:/*#__PURE__*/_jsx(Err,{msg:error})}),loading&&!systems.length&&/*#__PURE__*/_jsx(\"div\",{className:\"p-4 text-xs text-slate-600 animate-pulse\",children:\"Loading systems\\u2026\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 overflow-y-auto\",children:[systems.map(s=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setSelected(s),className:\"w-full text-left px-4 py-3 border-b border-slate-800/50 transition-colors flex items-center justify-between group \".concat((selected===null||selected===void 0?void 0:selected.system_id)===s.system_id?\"bg-indigo-600/10 border-l-2 border-l-indigo-500\":\"hover:bg-slate-800/40 border-l-2 border-l-transparent\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"min-w-0\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-mono truncate \".concat((selected===null||selected===void 0?void 0:selected.system_id)===s.system_id?\"text-indigo-200\":\"text-slate-300\"),children:s.system_name}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mt-1\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-[10px] text-slate-600 font-mono\",children:[\"L\",s.layer_id]}),/*#__PURE__*/_jsx(SovereigntyBadge,{level:s.sovereignty_level}),!s.is_active&&/*#__PURE__*/_jsx(\"span\",{className:\"text-[10px] text-slate-600\",children:\"inactive\"})]})]}),/*#__PURE__*/_jsx(ChevronRight,{size:13,className:\"flex-shrink-0 ml-2 transition-colors \".concat((selected===null||selected===void 0?void 0:selected.system_id)===s.system_id?\"text-indigo-400\":\"text-slate-700 group-hover:text-slate-500\")})]},s.system_id)),!loading&&systems.length===0&&/*#__PURE__*/_jsx(\"p\",{className:\"px-4 py-6 text-xs text-slate-600 text-center\",children:\"No systems registered\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-2 border-t border-slate-800\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-[10px] text-slate-700 font-mono\",children:[systems.length,\" system\",systems.length!==1?\"s\":\"\"]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 min-w-0 overflow-hidden\",children:selected?/*#__PURE__*/_jsx(SystemDetail,{system:selected,onClose:()=>setSelected(null)}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center h-full text-center px-8\",children:[/*#__PURE__*/_jsx(Server,{size:32,className:\"text-slate-700 mb-3\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-500\",children:\"Select a system to inspect\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-700 mt-1\",children:\"Risk summary \\xB7 Dependency map \\xB7 Evaluations\"})]})})]});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}